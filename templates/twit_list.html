{% extends "base.html" %}

{% block title %}Twits{% endblock title %}

{% block content %}
<h1>Tweeter Home</h1>
<br>
  {% for twit in twit_list %}
    <p><a href="{% url "twit_detail" twit.pk %}">View Full Twit</a></p>
    <p>{{ twit.body }}</p>
    {% if twit.image_url != None %}
      <img src="{{ twit.image_url }}" alt="{{ twit.image_url }}" style="width:300px;height:300px"></img>
    {% endif %}
    <p>{{ twit.author }} | {{ twit.created }}</p>
    {% if twit.author == user %}
      <p>
        <a href="{% url "twit_edit" twit.pk %}">Edit</a> |
        <a href="{% url "twit_delete" twit.pk %}">Delete</a>
      </p>
    {% endif %}
    <p>
      <a href="#">Comment</a> |
      {% with user_likes=twit.likes.all %}
      <button
        data-id="{{ twit.id }}"
        data-action="{% if user in user_likes %}un{% endif %}like"
        data-like-url="{{ twit.get_like_url }}"
        class="like_button btn btn-{% if user not in user_likes %}outline-{% endif %}primary"
      >   
        <i class="like_icon bi-hand-thumbs-up{% if user in user_likes %}-fill{% endif %}"></i>
        <span class="like_count">{{ user_likes|length }}</span>
        Likes
      </button>
      {% endwith %}
    </p>
    {% for comment in twit.comments.all %}
      <p>
        {{ comment.author }} &middot;
        {{ comment }}
      </p>
    {% endfor %}
    <hr>
  {% endfor %}
{% endblock content %}